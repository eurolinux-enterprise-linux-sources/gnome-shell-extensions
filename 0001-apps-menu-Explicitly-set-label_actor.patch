From d04e66f692f5022a476c4ad8a9caeb0b5952b7b0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Florian=20M=C3=BCllner?= <fmuellner@gnome.org>
Date: Thu, 17 Mar 2016 17:15:38 +0100
Subject: [PATCH] apps-menu: Explicitly set label_actor

For some reason orca fails to pick up the label of category items,
so set the label_actor explicitly as workaround.
---
 extensions/apps-menu/extension.js | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/extensions/apps-menu/extension.js b/extensions/apps-menu/extension.js
index 41d1faf..03000bf 100644
--- a/extensions/apps-menu/extension.js
+++ b/extensions/apps-menu/extension.js
@@ -38,7 +38,9 @@ const ActivitiesMenuItem = new Lang.Class({
     _init: function(button) {
 	this.parent();
         this._button = button;
-        this.actor.add_child(new St.Label({ text: _("Activities Overview") }));
+        let label = new St.Label({ text: _("Activities Overview") });
+        this.actor.add_child(label);
+        this.actor.label_actor = label;
     },
 
     activate: function(event) {
@@ -140,7 +142,9 @@ const CategoryMenuItem = new Lang.Class({
         else
             name = _("Favorites");
 
-        this.actor.add_child(new St.Label({ text: name }));
+        let label = new St.Label({ text: name });
+        this.actor.add_child(label);
+        this.actor.label_actor = label;
         this.actor.connect('motion-event', Lang.bind(this, this._onMotionEvent));
     },
 
-- 
2.14.2

